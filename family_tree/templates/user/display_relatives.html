{% extends 'base.html' %}
{% block title %}Relatives{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">Your Relatives</h2>
  {% if relative_details and relative_details|length > 0 %}
  <div class="row g-4">
    {% for rel in relative_details %}
    <div class="col-md-6 col-lg-4">
      <div class="card h-100 border-0 shadow-sm">
        <div class="card-body text-center p-4">
          <!-- Profile Picture Placeholder -->
          <div class="mb-3">
            <div class="bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center"
              style="width: 80px; height: 80px;">
              {% if rel.profile_picture_url %}
                <img class="rounded-circle shadow-sm" src="{{ rel.profile_picture_url }}" alt="profile picture" style="width: 100px; height: 100px; object-fit: cover;">
              {% else %}
                <i class="fas fa-user text-primary fs-2"></i>
              {% endif %}
            </div>
          </div>

          <!-- Name -->
          <h5 class="card-title fw-bold mb-2">{{ rel.first_name }} {{ rel.last_name }}</h5>

          <!-- Relationship Badge -->
          <span class="badge bg-primary bg-opacity-10 text-primary px-3 py-2 rounded-pill mb-3">
            <i class="fas fa-heart me-1"></i>{{ rel.relationship|capitalize }}
          </span>

          <!-- Action Button -->
          <div class="mt-3">
            <form method="POST" action="{{ url_for('user.delete_relative', relative_user_id=rel.relative_user_id) }}"
              class="d-inline">
              <button type="submit" class="btn btn-outline-danger btn-sm rounded-pill"
                onclick="return confirm('Are you sure you want to remove {{ rel.first_name }} {{ rel.last_name }} from your relatives?')">
                <i class="fas fa-trash me-1"></i>Remove
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-info">No relatives found.</div>
  {% endif %}
  <a href="{{ url_for('user.add_relative') }}" class="btn btn-primary mt-3">Add Relationship</a>
  <a href="{{ url_for('user.dashboard') }}" class="btn btn-secondary mt-3">Back to Dashboard</a>
</div>
{% endblock %}